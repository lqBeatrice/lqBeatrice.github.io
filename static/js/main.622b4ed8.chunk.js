(this.webpackJsonpjira=this.webpackJsonpjira||[]).push([[0],{248:function(e,t){},406:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(36),i=n.n(a),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,427)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},s=(n(238),n(139)),u=n(421),j=n(31),l=n(33),d=n.n(l),b=n(45),O=n(130),f=n(24),h=function(e){var t=Object(f.a)({},e);return Object.keys(t).forEach((function(e){var n,r=t[e];0===(n=r)||n||delete t[e]})),t},p=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(r.useRef)(document.title).current;Object(r.useEffect)((function(){document.title=e}),[e]),Object(r.useEffect)((function(){return function(){t||(document.title=n)}}),[n,t])},x=n(118),m=n(222),v=n.n(m),g="http://online.com",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.token,c=(t.headers,Object(x.a)(t,["data","token","headers"])),a=Object(f.a)({headers:{Authorization:r?"Bearer ".concat(r):"","Content-Type":n?"application/json":""},method:"GET"},c);return"GET"===a.method.toUpperCase()?e+="?".concat(v.a.stringify(n)):a.body=JSON.stringify(n||{}),window.fetch("".concat(g,"/").concat(e),a).then(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=7;break}return e.abrupt("return",n);case 7:return e.abrupt("return",Promise.reject(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},y=function(){var e=A().user;return Object(r.useCallback)((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var c=n[0],a=n[1];return k(c,Object(f.a)(Object(f.a)({},a),{},{token:null===e||void 0===e?void 0:e.token}))}),[null===e||void 0===e?void 0:e.token])},I="__auth_provider_token__",w=function(e){var t=e.user;return window.localStorage.setItem(I,t.token||""),t},C="http://online.com",T=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.removeItem(I));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=n(6),S=function(){var e=Object(b.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!(n=window.localStorage.getItem(I))){e.next=7;break}return e.next=5,k("me",{token:n});case 5:r=e.sent,t=r.user;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=c.a.createContext(void 0);P.displayName="AuthContext";var N,D,L,F,z=function(e){var t,n=e.children,c=Object(r.useState)(null),a=Object(j.a)(c,2),i=a[0],o=a[1],u=Object(s.b)();return t=function(){S().then(o)},Object(r.useEffect)((function(){t()}),[]),Object(E.jsx)(P.Provider,{children:n,value:{user:i,login:function(e){return(t=e,fetch("".concat(C,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.t0=w,e.next=4,t.json();case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:return e.t2=Promise,e.next=11,t.json();case 11:return e.t3=e.sent,e.abrupt("return",e.t2.reject.call(e.t2,e.t3));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(o);var t},register:function(e){return(t=e,fetch("".concat(C,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.t0=w,e.next=4,t.json();case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:return e.t2=Promise,e.next=11,t.json();case 11:return e.t3=e.sent,e.abrupt("return",e.t2.reject.call(e.t2,e.t3));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(o);var t},logout:function(){return T().then((function(){u.clear(),o(null)}))}}})},A=function(){var e=c.a.useContext(P);if(!e)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return e},B=function(e){var t=e.children;return Object(E.jsx)(s.a,{client:new u.a,children:Object(E.jsx)(z,{children:t})})},M=n(37),Y=n(38),V=n(142),_=n(52),q=n(415),J=Y.a.div(N||(N=Object(M.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin-bottom: ",";\n\n  > * {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    margin-right: ",";\n  }\n"])),(function(e){return e.between?"space-between":void 0}),(function(e){return e.marginBottom+"rem"}),(function(e){return"number"===typeof e.gap?e.gap+"rem":e.gap?"2rem":void 0})),R=(Y.a.div(D||(D=Object(M.a)(["\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Object(Y.a)(_.a)(L||(L=Object(M.a)(["\n  padding: 0;\n"])))),H=function(e){var t,n=e.error;return(null===(t=n)||void 0===t?void 0:t.message)?Object(E.jsx)(q.a.Text,{type:"danger",children:null===n||void 0===n?void 0:n.message}):null},Q=Y.a.div(F||(F=Object(M.a)(["\n  padding: 3.2rem;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),G=n(167),K=n(106),U=n(21),Z=n(66),W=n(416),X=n(229),$=n(422),ee=function(e){var t=y();return Object($.a)(["users",e],(function(){return t("users",{data:h(e||{})})}))},te=n(129),ne=function(e){var t=e.value,n=e.onChange,r=e.defaultOptionName,c=e.options;return Object(E.jsxs)(te.a,{value:(null===c||void 0===c?void 0:c.length)?re(t):0,onChange:function(e){return null===n||void 0===n?void 0:n(re(e)||void 0)},children:[r?Object(E.jsx)(te.a.Option,{value:0,children:r}):null,null===c||void 0===c?void 0:c.map((function(e){return Object(E.jsx)(te.a.Option,{value:e.id,children:e.name},e.id)}))]})},re=function(e){return isNaN(Number(e))?0:Number(e)},ce=function(e){var t=ee().data;return Object(E.jsx)(ne,Object(f.a)({options:t||[]},e))},ae=function(e){var t=e.users,n=e.param,r=e.setParam;return Object(E.jsxs)(W.a,{style:{display:"flex",justifyContent:"flex-start"},children:[Object(E.jsx)(W.a.Item,{children:Object(E.jsx)(X.a,{type:"text",value:n.name,onChange:function(e){return r(Object(f.a)(Object(f.a)({},n),{},{name:e.target.value}))}})}),Object(E.jsx)(W.a.Item,{children:Object(E.jsx)(ce,{value:n.personId,options:t,defaultOptionName:"\u8d1f\u8d23\u4eba",onChange:function(e){return r(Object(f.a)(Object(f.a)({},n),{},{personId:e}))}})})]})},ie=n(412),oe=n(128),se=n.n(oe),ue=n(227),je=n.n(ue),le=function(e){var t=e.checked,n=e.onCheckedChange,r=Object(x.a)(e,["checked","onCheckedChange"]);return Object(E.jsx)(je.a,Object(f.a)({count:1,value:t?1:0,onChange:function(e){return null===n||void 0===n?void 0:n(!!e)}},r))},de=n(426),be=function(e,t){var n=Object(s.b)();return{onSuccess:function(){return n.invalidateQueries(e)},onMutate:function(r){return Object(b.a)(d.a.mark((function c(){var a;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a=n.getQueryData(e),n.setQueryData(e,(function(e){return t(r,e)})),c.abrupt("return",{previousItems:a});case 3:case"end":return c.stop()}}),c)})))()},onError:function(t,r,c){n.setQueryData(e,c.previousItems)}}},Oe=function(e){return be(e,(function(e,t){return(null===t||void 0===t?void 0:t.filter((function(t){return t.id!==e.id})))||[]}))},fe=function(e){return be(e,(function(e,t){return t?[].concat(Object(O.a)(t),[e]):[]}))},he=function(e){var t=y();return Object($.a)(["projects",e],(function(){return t("projects",{data:h(e||{})})}))},pe=function(e){var t=y();return Object(de.a)((function(e){return t("projects/".concat(e.id),{method:"PATCH",data:e})}),function(e){return be(e,(function(e,t){return(null===t||void 0===t?void 0:t.map((function(t){return t.id===e.id?Object(f.a)(Object(f.a)({},t),e):t})))||[]}))}(e))},xe=function(e){var t=y();return Object(de.a)((function(e){return t("projects",{method:"POST",data:e})}),fe(e))},me=function(e){var t=y();return Object($.a)(["project",{id:e}],(function(){return t("projects/".concat(e))}),{enabled:Boolean(e)})},ve=n(138),ge=function(e){var t=Object(Z.c)(),n=Object(j.a)(t,1)[0],c=ke();return[Object(r.useMemo)((function(){return e.reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(ve.a)({},t,n.get(t)||""))}),{})}),[n]),function(e){return c(e)}]},ke=function(){var e=Object(Z.c)(),t=Object(j.a)(e,2),n=t[0],r=t[1];return function(e){var t=h(Object(f.a)(Object(f.a)({},Object.fromEntries(n)),e));return r(t)}},ye=function(){var e=ge(["name","personId"]),t=Object(j.a)(e,2),n=t[0],c=t[1];return[Object(r.useMemo)((function(){return Object(f.a)(Object(f.a)({},n),{},{personId:Number(n.personId)||void 0})}),[n]),c]},Ie=function(){var e=ye();return["projects",Object(j.a)(e,1)[0]]},we=function(){var e=ge(["projectCreate"]),t=Object(j.a)(e,2),n=t[0].projectCreate,r=t[1],c=ge(["editingProjectId"]),a=Object(j.a)(c,2),i=a[0].editingProjectId,o=a[1],s=me(Number(i)),u=s.data,l=s.isLoading,d=ke();return{projectModalOpen:"true"===n||Boolean(i),open:function(){r({projectCreate:!0})},close:function(){return d({projectCreate:"",editingProjectId:""})},startEdit:function(e){o({editingProjectId:e})},isLoading:l,editingProject:u}},Ce=function(e){var t=e.users,n=Object(x.a)(e,["users"]),r=pe(Ie()).mutate;return Object(E.jsx)(ie.a,Object(f.a)({rowKey:"id",pagination:!1,columns:[{title:Object(E.jsx)(le,{checked:!0,disabled:!0}),render:function(e,t){return Object(E.jsx)(le,{checked:t.pin,onCheckedChange:(n=t.id,function(e){return r({id:n,pin:e})})});var n}},{title:"\u540d\u79f0",sorter:function(e,t){return e.name.localeCompare(t.name)},render:function(e,t){return Object(E.jsx)(Z.b,{to:String(t.id),children:t.name})}},{title:"\u90e8\u95e8",dataIndex:"organization"},{title:"\u8d1f\u8d23\u4eba",render:function(e,n){var r;return Object(E.jsx)("span",{children:(null===(r=t.find((function(e){return e.id===n.personId})))||void 0===r?void 0:r.name)||"\u672a\u77e5"})}},{title:"\u521b\u5efa\u65f6\u95f4",render:function(e,t){return Object(E.jsx)("span",{children:t.created?se()(t.created).format("YYYY-MM-DD"):"\u65e0"})}},{render:function(e,t){return Object(E.jsx)(Te,{project:t})}}]},n))},Te=function(e){var t,n=e.project,r=function(e){var t=y();return Object(de.a)((function(e){var n=e.id;return t("projects/".concat(n),{method:"DELETE"})}),Oe(e))}(Ie()).mutate,c=we().startEdit;return Object(E.jsx)(G.a,{overlay:Object(E.jsxs)(K.a,{children:[Object(E.jsx)(K.a.Item,{children:Object(E.jsx)(R,{type:"link",onClick:(t=n.id,function(){return c(t)}),children:"\u7f16\u8f91"},"edit")}),Object(E.jsx)(K.a.Item,{children:Object(E.jsx)(R,{type:"link",onClick:function(e){return function(){return r({id:e})}}(n.id),children:"\u5220\u9664"},"delete")})]}),children:Object(E.jsx)(R,{type:"link",children:"..."})})},Ee=function(){p("\u9879\u76ee\u5217\u8868");var e=ye(),t=Object(j.a)(e,2),n=t[0],c=t[1],a=he(function(e,t){var n=Object(r.useState)(e),c=Object(j.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}(n,2e3)),i=a.isLoading,o=a.error,s=a.data,u=ee().data,l=we().open;return Object(E.jsxs)(Q,{children:[Object(E.jsxs)(J,{between:!0,children:[Object(E.jsx)("h1",{children:"\u9879\u76ee\u5217\u8868"}),Object(E.jsx)(R,{onClick:l,type:"link",children:"\u521b\u5efa\u9879\u76ee"})]}),Object(E.jsx)(ae,{users:u||[],param:n,setParam:c}),Object(E.jsx)(H,{error:o}),Object(E.jsx)(Ce,{loading:i,users:u||[],dataSource:s||[]})]})};Ee.whyDidYouRender=!1;var Se,Pe,Ne,De,Le,Fe,ze,Ae,Be,Me,Ye,Ve,_e,qe=n(165),Je=n(413),Re=n(419),He=n(411),Qe=n(417),Ge=n(423),Ke=function(){var e=Object(r.useState)("default"),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(E.jsxs)(W.a,{style:{width:"60%",padding:24,margin:"0 auto"},layout:"horizontal",initialValues:{size:n},onValuesChange:function(e){var t=e.size;c(t)},size:n,children:[Object(E.jsx)(W.a.Item,{label:"Form Size",name:"size",children:Object(E.jsxs)(qe.a.Group,{children:[Object(E.jsx)(qe.a.Button,{value:"small",children:"Small"}),Object(E.jsx)(qe.a.Button,{value:"default",children:"Default"}),Object(E.jsx)(qe.a.Button,{value:"large",children:"Large"})]})}),Object(E.jsx)(W.a.Item,{label:"Input",children:Object(E.jsx)(X.a,{})}),Object(E.jsx)(W.a.Item,{label:"Select",children:Object(E.jsx)(te.a,{children:Object(E.jsx)(te.a.Option,{value:"demo",children:"Demo"})})}),Object(E.jsx)(W.a.Item,{label:"TreeSelect",children:Object(E.jsx)(Je.a,{treeData:[{title:"Light",value:"light",children:[{title:"Bamboo",value:"bamboo"}]}]})}),Object(E.jsx)(W.a.Item,{label:"Cascader",children:Object(E.jsx)(Re.a,{options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou"}]}]})}),Object(E.jsx)(W.a.Item,{label:"DatePicker",children:Object(E.jsx)(He.a,{})}),Object(E.jsx)(W.a.Item,{label:"InputNumber",children:Object(E.jsx)(Qe.a,{})}),Object(E.jsx)(W.a.Item,{label:"Switch",valuePropName:"checked",children:Object(E.jsx)(Ge.a,{})}),Object(E.jsx)(W.a.Item,{label:"Button",children:Object(E.jsx)(_.a,{children:"Button"})})]})},Ue=function(e){var t=y();return Object($.a)(["tasks",e],(function(){return t("tasks",{data:h(e||{})})}))},Ze=function(){var e,t=null===(e=Object(U.g)().pathname.match(/projects\/(\d+)/))||void 0===e?void 0:e[1];return Number(t)},We=function(){return me(Ze())},Xe=function(){return{projectId:Ze()}},$e=function(){return["kanbans",Xe()]},et=function(){var e=Ze(),t=ge(["name","typeId","processorId","tagId"]),n=Object(j.a)(t,2),c=n[0];n[1];return Object(r.useMemo)((function(){return{projectId:e,typeId:Number(c.typeId)||void 0,processorId:Number(c.processorId)||void 0,tagId:Number(c.tagId)||void 0,name:c.name}}),[e,c])},tt=function(){return["tasks",et()]},nt=function(){var e=ge(["taskCreate"]),t=Object(j.a)(e,2),n=t[0].taskCreate,r=t[1],c=ge(["editingTaskId"]),a=Object(j.a)(c,2),i=a[0].editingTaskId,o=a[1],s=function(e){var t=y();return Object($.a)(["tasks",{id:e}],(function(){return t("tasks/".concat(e))}),{enabled:Boolean(e)})}(Number(i)),u=s.data,l=s.isLoading,d=ke();return{taskModalOpen:"true"===n||Boolean(i),open:function(){r({taskCreate:!0})},close:function(){return d({taskCreate:"",editingTaskId:""})},startEdit:function(e){o({editingTaskId:e})},editingTask:u,editingTaskId:i,isLoading:l}},rt=n(418),ct=n(424),at=n(420),it=n(161),ot=function(e){var t=y();return Object($.a)(["epics",e],(function(){return t("epics",{data:e})}))},st=function(){return["epics",{projectId:Ze()}]},ut=function(e){var t=Ze(),n=function(e){var t=y();return Object(de.a)((function(e){return t("epics",{method:"POST",data:e})}),fe(e))}(st()),c=n.mutateAsync,a=n.isLoading,i=n.error,o=Object(it.useForm)(),s=Object(j.a)(o,1)[0],u=function(){var n=Object(b.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(Object(f.a)({projectId:t},r));case 2:e.onClose();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){s.resetFields()}),[s,e.visible]),Object(E.jsxs)(at.a,{forceRender:!0,placement:"right",closable:!0,onClose:e.onClose,visible:e.visible,width:"100%",children:[Object(E.jsx)("h1",{children:"\u521b\u5efa\u4efb\u52a1\u7ec4"}),Object(E.jsx)(H,{error:i}),Object(E.jsxs)(W.a,{form:s,layout:"vertical",style:{width:"40rem"},onFinish:u,children:[Object(E.jsx)(W.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}],children:Object(E.jsx)(X.a,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"})}),Object(E.jsx)(W.a.Item,{style:{textAlign:"right"},children:Object(E.jsx)(_.a,{loading:a,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})},jt=function(){p("\u4efb\u52a1\u7ec4\u5217\u8868");var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],a=We().data,i=ot({projectId:null===a||void 0===a?void 0:a.id}),o=i.data,s=i.isLoading,u=function(e){var t=y();return Object(de.a)((function(e){var n=e.id;return t("epics/".concat(n),{method:"DELETE"})}),Oe(e))}(st()).mutateAsync,l=Ue({projectId:null===a||void 0===a?void 0:a.id}).data;return Object(E.jsxs)(Q,{children:[Object(E.jsxs)(J,{between:!0,children:[Object(E.jsxs)("h1",{children:[null===a||void 0===a?void 0:a.name,"\u4efb\u52a1\u7ec4"]}),Object(E.jsx)(_.a,{type:"link",onClick:function(){c(!0)},children:"\u521b\u5efa\u4efb\u52a1\u7ec4"})]}),s?Object(E.jsx)(V.a,{size:"large"}):Object(E.jsx)(ct.b,{style:{overflow:"scroll"},itemLayout:"vertical",dataSource:o,renderItem:function(e){return Object(E.jsxs)(ct.b.Item,{children:[Object(E.jsx)(ct.b.Item.Meta,{title:Object(E.jsxs)(J,{between:!0,children:[Object(E.jsx)("span",{children:e.name}),Object(E.jsx)(_.a,{onClick:function(){return function(e){rt.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u9879\u76ee\u7ec4\uff1a".concat(e.name),content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk:function(){u({id:e.id})}})}(e)},type:"link",children:"\u5220\u9664"})]}),description:Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4\uff1a",se()(e.start).format("YYYY-MM-DD")]}),Object(E.jsxs)("div",{children:["\u7ed3\u675f\u65f6\u95f4\uff1a",se()(e.end).format("YYYY-MM-DD")]})]})}),Object(E.jsx)("div",{children:l?l.filter((function(t){return t.epicId===e.id})).map((function(e){return Object(E.jsx)("div",{children:Object(E.jsx)(Z.b,{to:"/projects/".concat(null===a||void 0===a?void 0:a.id,"/kanban?editingTaskId=").concat(e.id),children:e.name},e.id)})})):null})]})}}),Object(E.jsx)(ut,{visible:n,onClose:function(){c(!1)}})]})},lt=n(414),dt=function(){var e=y();return Object($.a)(["taskTypes"],(function(){return e("taskTypes")}))},bt=n.p+"static/media/task.69774797.svg",Ot=n.p+"static/media/bug.5d8e8fd5.svg",ft=function(e){var t=e.kanbanId,n=Object(r.useState)(!1),c=Object(j.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)(""),s=Object(j.a)(o,2),u=s[0],l=s[1],O=function(e){var t=y();return Object(de.a)((function(e){return t("tasks",{method:"POST",data:e})}),Oe(e))}(tt()).mutateAsync,f=Ze(),h=function(){return i((function(e){return!e}))},p=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({projectId:f,kanbanId:t,name:u});case 2:i(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a||l("")}),[a]),a?Object(E.jsx)(lt.a,{children:Object(E.jsx)(X.a,{value:u,placeholder:"\u9700\u8981\u505a\u4e9b\u4ec0\u4e48",autoFocus:!0,onChange:function(e){return l(e.target.value)},onBlur:h,onPressEnter:p})}):Object(E.jsx)("div",{onClick:h,children:"+\u521b\u5efa\u4e8b\u52a1"})},ht=function(e){var t,n=e.id,r=dt().data,c=null===r||void 0===r||null===(t=r.find((function(e){return e.id===n})))||void 0===t?void 0:t.name;return c?Object(E.jsx)("img",{alt:"",src:"task"===c?bt:Ot}):null},pt=function(e){var t=e.task,n=e.keyword,r=(null===t||void 0===t?void 0:t.name.split(n))||[],c=nt().startEdit;return Object(E.jsxs)(lt.a,{onClick:function(){return function(e){c(e.id)}(t)},style:{marginBottom:"0.5rem",cursor:"pointer"},children:[Object(E.jsx)("p",{children:n?r.map((function(e,t){return Object(E.jsxs)("span",{children:[e,t===r.length-1?null:Object(E.jsx)("span",{style:{color:"red"},children:n},t)]},t)})):t.name}),Object(E.jsx)(ht,{id:t.typeId})]},t.id)},xt=function(e){var t=e.kanban,n=Ue(et()).data,r=et().name,c=null===n||void 0===n?void 0:n.filter((function(e){return e.kanbanId===t.id}));return Object(E.jsxs)(vt,{children:[Object(E.jsxs)(J,{between:!0,children:[Object(E.jsx)("h3",{children:t.name}),Object(E.jsx)(mt,{kanban:t})]}),Object(E.jsxs)(gt,{children:[null===c||void 0===c?void 0:c.map((function(e){return Object(E.jsx)(pt,{task:e,keyword:r},e.id)})),Object(E.jsx)(ft,{kanbanId:t.id})]})]})},mt=function(e){var t=e.kanban,n=function(e){var t=y();return Object(de.a)((function(e){var n=e.id;return t("kanbans/".concat(n),{method:"DELETE"})}),Oe(e))}($e()).mutateAsync;return Object(E.jsx)(G.a,{overlay:Object(E.jsx)(K.a,{children:Object(E.jsx)(K.a.Item,{children:Object(E.jsx)(_.a,{type:"link",onClick:function(){rt.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u770b\u677f\u5417",onOk:function(){return n({id:t.id})}})},children:"\u5220\u9664"})})}),children:Object(E.jsx)(_.a,{type:"link",children:"..."})})},vt=Y.a.div(Se||(Se=Object(M.a)(["\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem 0.7rem 1rem;\n  margin-right: 1.5rem;\n"]))),gt=Y.a.div(Pe||(Pe=Object(M.a)(["\n  overflow: scroll;\n  flex: 1;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n"]))),kt=function(e){var t=dt().data;return Object(E.jsx)(ne,Object(f.a)({options:t||[]},e))},yt=function(){var e=et(),t=ke();return Object(E.jsxs)(J,{gap:!0,marginBottom:4,children:[Object(E.jsx)(X.a,{style:{width:"200px"},placeholder:"\u4efb\u52a1\u540d",value:e.name,onChange:function(e){return t({name:e.target.value})}}),Object(E.jsx)(ce,{defaultOptionName:"\u7ecf\u529e\u4eba",value:e.processorId,onChange:function(e){return t({processorId:e})}}),Object(E.jsx)(kt,{defaultOptionName:"\u7c7b\u578b",value:e.typeId,onChange:function(e){return t({typeId:e})}}),Object(E.jsx)(_.a,{onClick:function(){return t({name:"",processorId:"",typeId:""})},children:"\u6e05\u9664\u7b5b\u9009\u5668"})]})},It=function(e){var t=ot().data;return Object(E.jsx)(ne,Object(f.a)({options:t||[]},e))},wt={labelCol:{span:8},wrapperCol:{span:16}},Ct=function(){var e=W.a.useForm(),t=Object(j.a)(e,1)[0],n=nt(),c=n.editingTaskId,a=n.editingTask,i=n.close,o=function(e){var t=y();return Object(de.a)((function(e){return t("tasks/".concat(e.id),{method:"PATCH",data:e})}),Oe(e))}(tt()),s=o.mutateAsync,u=o.isLoading,l=function(e){var t=y();return Object(de.a)((function(e){var n=e.id;return t("tasks/".concat(n),{method:"DELETE"})}),Oe(e))}(tt()).mutate,O=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(Object(f.a)(Object(f.a)({},a),t.getFieldsValue()));case 2:i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){t.setFieldsValue(a)}),[t,a]),Object(E.jsxs)(rt.a,{forceRender:!0,onCancel:function(){i(),t.resetFields()},onOk:O,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",confirmLoading:u,title:"\u7f16\u8f91\u4efb\u52a1",visible:!!c,children:[Object(E.jsxs)(W.a,Object(f.a)(Object(f.a)({},wt),{},{initialValues:a,form:t,children:[Object(E.jsx)(W.a.Item,{label:"\u4efb\u52a1\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d"}],children:Object(E.jsx)(X.a,{})}),Object(E.jsx)(W.a.Item,{label:"\u4efb\u52a1\u7ec4",name:"epicId",children:Object(E.jsx)(It,{defaultOptionName:"\u4efb\u52a1\u7ec4"})}),Object(E.jsx)(W.a.Item,{label:"\u7ecf\u529e\u4eba",name:"processorId",children:Object(E.jsx)(ce,{defaultOptionName:"\u7ecf\u529e\u4eba"})}),Object(E.jsx)(W.a.Item,{label:"\u7c7b\u578b",name:"typeId",children:Object(E.jsx)(kt,{})})]})),Object(E.jsx)("div",{style:{textAlign:"right"},children:Object(E.jsx)(_.a,{onClick:function(){i(),rt.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u4efb\u52a1\u5417",onOk:function(){return l({id:Number(c)})}})},style:{fontSize:"14px"},size:"small",children:"\u5220\u9664"})})]})},Tt=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],a=function(e){var t=y();return Object(de.a)((function(e){return t("kanbans",{method:"POST",data:e})}),Oe(e))}($e()).mutateAsync,i=Ze(),o=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({name:n,projectId:i});case 2:c("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsx)(vt,{children:Object(E.jsx)(X.a,{placeholder:"\u65b0\u5efa\u770b\u677f",size:"large",onPressEnter:o,value:n,onChange:function(e){return c(e.target.value)}})})},Et=function(){p("\u770b\u677f\u5217\u8868");var e=function(e){var t=y();return Object($.a)(["kanbans",e],(function(){return t("kanbans",{data:h(e||{})})}))}(Xe()).data,t=We().data;return Object(E.jsxs)(Q,{children:[Object(E.jsxs)("h1",{children:[null===t||void 0===t?void 0:t.name,"\u770b\u677f"]}),Object(E.jsx)(yt,{}),Object(E.jsxs)(St,{children:[null===e||void 0===e?void 0:e.map((function(e){return Object(E.jsx)(xt,{kanban:e},e.id)})),Object(E.jsx)(Tt,{})]}),Object(E.jsx)(Ct,{})]})},St=Y.a.div(Ne||(Ne=Object(M.a)(["\n  display: flex;\n  overflow-x: scroll;\n  flex: 1;\n"]))),Pt=function(){var e=function(){var e=Object(U.g)().pathname.split("/");return e[e.length-1]}();return Object(E.jsxs)(Lt,{children:[Object(E.jsx)(Nt,{children:Object(E.jsxs)(K.a,{mode:"inline",selectedKeys:[e],children:[Object(E.jsx)(K.a.Item,{children:Object(E.jsx)(Z.b,{to:"kanban",children:"\u770b\u677f"})},"kanban"),Object(E.jsx)(K.a.Item,{children:Object(E.jsx)(Z.b,{to:"epic",children:"\u4efb\u52a1\u7ec4"})},"epic")]})}),Object(E.jsx)(Dt,{children:Object(E.jsxs)(U.d,{children:[Object(E.jsx)(U.b,{path:"/kanban",element:Object(E.jsx)(Et,{})}),Object(E.jsx)(U.b,{path:"/epic",element:Object(E.jsx)(jt,{})}),Object(E.jsx)(U.a,{to:window.location.pathname+"/kanban",replace:!0})]})})]})},Nt=Y.a.aside(De||(De=Object(M.a)(["\n  background-color: rgb(244, 245, 247);\n  display: flex;\n"]))),Dt=Y.a.div(Le||(Le=Object(M.a)(["\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\n  display: flex;\n  overflow: hidden;\n"]))),Lt=Y.a.div(Fe||(Fe=Object(M.a)(["\n  display: grid;\n  grid-template-columns: 16rem 1fr;\n"]))),Ft=function(){var e=we(),t=e.projectModalOpen,n=e.close,c=e.editingProject,a=(e.startEdit,e.isLoading),i=Object(it.useForm)(),o=Object(j.a)(i,1)[0],s=(c?pe:xe)(Ie()),u=s.mutateAsync,l=s.isLoading,d=s.error;Object(r.useEffect)((function(){o.setFieldsValue(c)}),[c,o]);var b=c?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee";return Object(E.jsx)(at.a,{forceRender:!0,closable:!0,onClose:function(){o.resetFields(),n()},visible:t,width:"100%",children:a?Object(E.jsx)(V.a,{size:"large"}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h1",{children:b}),Object(E.jsx)(H,{error:d}),Object(E.jsxs)(W.a,{form:o,layout:"vertical",style:{width:"40rem"},onFinish:function(e){u(Object(f.a)(Object(f.a)({},c),e)).then((function(){o.resetFields(),n()}))},children:[Object(E.jsx)(W.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}],children:Object(E.jsx)(X.a,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"})}),Object(E.jsx)(W.a.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0"}],children:Object(E.jsx)(X.a,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0"})}),Object(E.jsx)(W.a.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8d1f\u8d23\u4eba"}],children:Object(E.jsx)(ce,{defaultOptionName:"\u8d1f\u8d23\u4eba"})}),Object(E.jsx)(W.a.Item,{style:{textAlign:"right"},children:Object(E.jsx)(_.a,{loading:l,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})},zt=n(410),At=n(425),Bt=function(){var e=he(),t=e.data,n=e.refetch,r=we().open,c=null===t||void 0===t?void 0:t.filter((function(e){return e.pin})),a=Object(E.jsxs)(Mt,{children:[Object(E.jsx)(q.a.Text,{type:"secondary",children:"\u6536\u85cf\u9879\u76ee"}),Object(E.jsx)(ct.b,{children:null===c||void 0===c?void 0:c.map((function(e){return Object(E.jsx)(ct.b.Item,{children:Object(E.jsx)(ct.b.Item.Meta,{title:e.name})},e.id)}))}),Object(E.jsx)(zt.a,{}),Object(E.jsx)(R,{type:"link",onClick:r,children:"\u521b\u5efa"})]});return Object(E.jsx)(At.a,{onVisibleChange:function(){return n()},content:a,placement:"bottom",title:"\u9879\u76ee",children:Object(E.jsx)("span",{children:"\u9879\u76ee"})})},Mt=Y.a.div(ze||(ze=Object(M.a)(["\n  min-width: 20rem;\n"]))),Yt=function(){var e=ee(),t=e.data,n=e.refetch,r=Object(E.jsxs)(Vt,{children:[Object(E.jsx)(q.a.Text,{type:"secondary",children:"\u7ec4\u5458\u5217\u8868"}),Object(E.jsx)(ct.b,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(E.jsx)(ct.b.Item,{children:Object(E.jsx)(ct.b.Item.Meta,{title:e.name})},e.id)}))}),Object(E.jsx)(zt.a,{})]});return Object(E.jsx)(At.a,{onVisibleChange:function(){return n()},content:r,placement:"bottom",title:"\u9879\u76ee",children:Object(E.jsx)("span",{children:"\u7ec4\u5458"})})},Vt=Y.a.div(Ae||(Ae=Object(M.a)(["\n  min-width: 20rem;\n"]))),_t=n.p+"static/media/software-logo.ec204298.svg",qt=function(){return Object(E.jsx)(Ht,{children:Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(Jt,{}),Object(E.jsx)(Ut,{children:Object(E.jsxs)(U.d,{children:[Object(E.jsx)(U.b,{path:"/projects",element:Object(E.jsx)(Ee,{})}),Object(E.jsx)(U.b,{path:"/projects/:projectId/*",element:Object(E.jsx)(Pt,{})}),Object(E.jsx)(U.b,{path:"/forms",element:Object(E.jsx)(Ke,{})}),Object(E.jsx)(U.a,{to:"/forms"})]})}),Object(E.jsx)(Ft,{})]})})},Jt=function(e){var t=function(){window.location.href=window.location.origin};return Object(E.jsxs)(Qt,{between:!0,children:[Object(E.jsxs)(Gt,{gap:!0,children:[Object(E.jsx)("img",{onClick:t,style:{width:"200px",cursor:"pointer"},alt:"",src:_t}),Object(E.jsx)("span",{onClick:t,children:"\u9996\u9875"}),Object(E.jsx)(Bt,{}),Object(E.jsx)(Yt,{}),Object(E.jsx)("span",{onClick:function(){console.log(8999),console.log(e)},children:"\u8868\u5355"})]}),Object(E.jsx)(Kt,{children:Object(E.jsx)(Rt,{})})]})},Rt=function(){var e=A(),t=e.logout,n=e.user;return Object(E.jsx)(G.a,{overlay:Object(E.jsx)(K.a,{children:Object(E.jsx)(K.a.Item,{children:Object(E.jsx)(_.a,{onClick:t,type:"link",children:"\u767b\u51fa"})},"logout")}),children:Object(E.jsxs)(_.a,{type:"link",onClick:function(e){return e.preventDefault()},children:["Hi, ",null===n||void 0===n?void 0:n.name]})})},Ht=Y.a.div(Be||(Be=Object(M.a)(["\n  display: grid;\n  grid-template-rows: 7rem 1fr;\n  height: 100vh;\n"]))),Qt=Object(Y.a)(J)(Me||(Me=Object(M.a)(["\n  padding: 3.2rem;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n  z-index: 1;\n"]))),Gt=Object(Y.a)(J)(Ye||(Ye=Object(M.a)(["\n  & > span {\n    cursor: pointer;\n  }\n"]))),Kt=Y.a.div(Ve||(Ve=Object(M.a)([""]))),Ut=Y.a.main(_e||(_e=Object(M.a)(["\n  display: flex;\n  overflow: hidden;\n  padding: 0;\n  & > div {\n    width: 100%;\n  }\n"])));i.a.render(Object(E.jsxs)(c.a.StrictMode,{children:[Object(E.jsx)(B,{children:Object(E.jsx)(qt,{})}),","]}),document.getElementById("root")),o()}},[[406,1,2]]]);
//# sourceMappingURL=main.622b4ed8.chunk.js.map